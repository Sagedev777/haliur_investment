{% extends "base.html" %}
{% block title %}Account Detail{% endblock %}

{% block content %}
<div class="container mt-4">
    <h2>Account #{{ account.id }} - {{ account.person1_first_name }} {{ account.person1_last_name }}</h2>

    <ul class="nav nav-tabs mb-3" id="accountTabs" role="tablist">
        <li class="nav-item">
            <a class="nav-link active" id="profile-tab" data-bs-toggle="tab" href="#profile">Profile</a>
        </li>
        <li class="nav-item">
            <a class="nav-link" id="transactions-tab" data-bs-toggle="tab" href="#transactions">Transactions</a>
        </li>
        <li class="nav-item">
            <a class="nav-link" id="loans-tab" data-bs-toggle="tab" href="#loans">Loans</a>
        </li>
    </ul>

    <div class="tab-content">
        <div class="tab-pane fade show active" id="profile">
            <table class="table table-bordered">
                <tr><th>Full Name</th><td>{{ account.person1_first_name }} {{ account.person1_last_name }}</td></tr>
                <tr><th>Contact</th><td>{{ account.person1_contact }}</td></tr>
                <tr><th>Address</th><td>{{ account.person1_address }}</td></tr>
                <tr><th>Gender</th><td>{{ account.person1_gender }}</td></tr>
                <tr><th>Business Location</th><td>{{ account.business_location }}</td></tr>
            </table>
        </div>

        <div class="tab-pane fade" id="transactions">
            <h5>Transactions</h5>
            <table class="table table-striped">
                <thead>
                    <tr>
                        <th>Date</th>
                        <th>Type</th>
                        <th>Amount (UGX)</th>
                    </tr>
                </thead>
                <tbody>
                    {% for tx in account.transactions.all %}
                    <tr>
                        <td>{{ tx.date }}</td>
                        <td>{{ tx.type }}</td>
                        <td>{{ tx.amount }}</td>
                    </tr>
                    {% empty %}
                    <tr><td colspan="3" class="text-center">No transactions</td></tr>
                    {% endfor %}
                </tbody>
            </table>
        </div>

        <div class="tab-pane fade" id="loans">
            <h5>Loans</h5>
            <table class="table table-striped">
                <thead>
                    <tr>
                        <th>Loan #</th>
                        <th>Amount</th>
                        <th>Status</th>
                    </tr>
                </thead>
                <tbody>
                    {% for loan in account.loans.all %}
                    <tr>
                        <td>{{ loan.id }}</td>
                        <td>{{ loan.amount }}</td>
                        <td>{{ loan.status }}</td>
                    </tr>
                    {% empty %}
                    <tr><td colspan="3" class="text-center">No loans</td></tr>
                    {% endfor %}
                </tbody>
            </table>
        </div>
    </div>
</div>
{% endblock %}
