{% extends "base.html" %}
{% block title %}Account Detail{% endblock %}

{% block content %}
<div class="container mt-4">
    <h2>Account Detail: {{ account.client_name }}</h2>

    <ul class="nav nav-tabs mb-3" id="accountTabs" role="tablist">
        <li class="nav-item" role="presentation">
            <button class="nav-link active" id="transactions-tab" data-bs-toggle="tab" data-bs-target="#transactions">Transactions</button>
        </li>
        <li class="nav-item" role="presentation">
            <button class="nav-link" id="loans-tab" data-bs-toggle="tab" data-bs-target="#loans">Loans</button>
        </li>
        <li class="nav-item" role="presentation">
            <button class="nav-link" id="profile-tab" data-bs-toggle="tab" data-bs-target="#profile">Profile</button>
        </li>
    </ul>

    <div class="tab-content">
        <div class="tab-pane fade show active" id="transactions">
            <table class="table table-bordered">
                <thead>
                    <tr>
                        <th>Date</th>
                        <th>Type</th>
                        <th>Amount</th>
                        <th>Balance</th>
                    </tr>
                </thead>
                <tbody>
                    {% for tx in transactions %}
                    <tr>
                        <td>{{ tx.date }}</td>
                        <td>{{ tx.tx_type }}</td>
                        <td>{{ tx.amount }}</td>
                        <td>{{ tx.balance }}</td>
                    </tr>
                    {% empty %}
                    <tr><td colspan="4" class="text-center">No transactions</td></tr>
                    {% endfor %}
                </tbody>
            </table>
        </div>

        <div class="tab-pane fade" id="loans">
            <table class="table table-bordered">
                <thead>
                    <tr>
                        <th>Loan ID</th>
                        <th>Amount</th>
                        <th>Status</th>
                        <th>Due Date</th>
                    </tr>
                </thead>
                <tbody>
                    {% for loan in loans %}
                    <tr>
                        <td>{{ loan.id }}</td>
                        <td>{{ loan.amount }}</td>
                        <td>{{ loan.status }}</td>
                        <td>{{ loan.due_date }}</td>
                    </tr>
                    {% empty %}
                    <tr><td colspan="4" class="text-center">No loans</td></tr>
                    {% endfor %}
                </tbody>
            </table>
        </div>

        <div class="tab-pane fade" id="profile">
            <dl class="row">
                <dt class="col-sm-3">Client Name</dt>
                <dd class="col-sm-9">{{ account.client_name }}</dd>

                <dt class="col-sm-3">Account Number</dt>
                <dd class="col-sm-9">{{ account.id }}</dd>

                <dt class="col-sm-3">Type</dt>
                <dd class="col-sm-9">{{ account.account_type }}</dd>

                <dt class="col-sm-3">Balance</dt>
                <dd class="col-sm-9">{{ account.balance }}</dd>
            </dl>
        </div>
    </div>
</div>
{% endblock %}
