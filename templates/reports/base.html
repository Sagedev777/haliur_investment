{% load static %}
<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>{% block title %}Haliur System{% endblock %}</title>

    <!-- Bootstrap CSS -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">

    <!-- Global Custom CSS -->
    <link rel="stylesheet" href="{% static 'reports/css/styles.css' %}">

    {% block extra_head %}{% endblock %}
</head>

<body>

    <!-- ================= NAVBAR ================= -->
    <nav class="navbar navbar-expand-lg navbar-dark bg-dark shadow-sm">
        <div class="container-fluid">

            <a class="navbar-brand" href="{% url 'core:admin_dashboard' %}">
                Haliur System
            </a>

            <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNav">
                <span class="navbar-toggler-icon"></span>
            </button>

            <div class="collapse navbar-collapse" id="navbarNav">

                <ul class="navbar-nav me-auto">

                    <!-- DASHBOARD -->
                    <li class="nav-item">
                        <a class="nav-link {% if request.path == '/dashboard/admin/' %}active{% endif %}"
                            href="{% url 'core:admin_dashboard' %}">
                            Dashboard
                        </a>
                    </li>

                    <!-- CLIENT ACCOUNTS -->
                    <li class="nav-item dropdown">
                        <a class="nav-link dropdown-toggle 
                       {% if 'accounts' in request.path %}active{% endif %}" href="#" id="accDrop"
                            data-bs-toggle="dropdown">
                            Client Accounts
                        </a>
                        <ul class="dropdown-menu">
                            <li><a class="dropdown-item" href="{% url 'accounts:account_list' %}">
                                    All Accounts
                                </a></li>
                            <li><a class="dropdown-item" href="{% url 'accounts:account_create' %}">
                                    Add New Account
                                </a></li>
                        </ul>
                    </li>

                    <!-- LOANS -->
                    <li class="nav-item dropdown">
                        <a class="nav-link dropdown-toggle 
                       {% if 'loans' in request.path %}active{% endif %}" href="#" id="loanDrop"
                            data-bs-toggle="dropdown">
                            Loans
                        </a>
                        <ul class="dropdown-menu">
                            <li><a class="dropdown-item" href="{% url 'loans:loan_list' %}">All Loans</a></li>
                            <li><a class="dropdown-item" href="{% url 'loans:loan_application_create' %}">
                                    Apply Loan
                                </a></li>
                            <li><a class="dropdown-item" href="{% url 'reports:loan_performance' %}">
                                    Performance
                                </a></li>
                            <li><a class="dropdown-item" href="{% url 'reports:loan_portfolio_report' %}">
                                    Portfolio
                                </a></li>
                            <li><a class="dropdown-item" href="{% url 'reports:loan_defaults_report' %}">
                                    Defaults
                                </a></li>
                            <li><a class="dropdown-item" href="{% url 'reports:loan_collections_report' %}">
                                    Collections
                                </a></li>
                        </ul>
                    </li>

                    <!-- SAVINGS (only reportsâ€”no savings app needed) -->
                    <li class="nav-item dropdown">
                        <a class="nav-link dropdown-toggle 
                       {% if 'savings' in request.path %}active{% endif %}" href="#" id="saveDrop"
                            data-bs-toggle="dropdown">
                            Savings
                        </a>
                        <ul class="dropdown-menu">
                            <li><a class="dropdown-item" href="{% url 'reports:savings_report' %}">
                                    Accounts & Balances
                                </a></li>
                            <li><a class="dropdown-item" href="{% url 'reports:savings_growth_report' %}">
                                    Growth
                                </a></li>
                            <li><a class="dropdown-item" href="{% url 'reports:savings_transactions_report' %}">
                                    Transactions
                                </a></li>
                            <li><a class="dropdown-item" href="{% url 'reports:top_savers_report' %}">
                                    Top Savers
                                </a></li>
                        </ul>
                    </li>

                    <!-- STAFF REPORTS -->
                    <li class="nav-item dropdown">
                        <a class="nav-link dropdown-toggle 
                       {% if 'staff' in request.path %}active{% endif %}" href="#" id="staffDrop"
                            data-bs-toggle="dropdown">
                            Staff
                        </a>
                        <ul class="dropdown-menu">
                            <li><a class="dropdown-item" href="{% url 'reports:staff_performance' %}">
                                    Performance
                                </a></li>
                            <li><a class="dropdown-item" href="{% url 'reports:staff_loans_report' %}">
                                    Loans
                                </a></li>
                            <li><a class="dropdown-item" href="{% url 'reports:staff_savings_report' %}">
                                    Savings
                                </a></li>
                        </ul>
                    </li>

                    <!-- FINANCIAL REPORTS -->
                    <li class="nav-item dropdown">
                        <a class="nav-link dropdown-toggle 
                       {% if 'financial' in request.path %}active{% endif %}" href="#" id="finDrop"
                            data-bs-toggle="dropdown">
                            Financial
                        </a>
                        <ul class="dropdown-menu">
                            <li><a class="dropdown-item" href="{% url 'reports:financial_report' %}">
                                    Report
                                </a></li>
                            <li><a class="dropdown-item" href="{% url 'reports:financial_summary' %}">
                                    Summary
                                </a></li>
                            <li><a class="dropdown-item" href="{% url 'reports:profit_loss_report' %}">
                                    Profit & Loss
                                </a></li>
                        </ul>
                    </li>

                </ul>

                <!-- LOGOUT -->
                <ul class="navbar-nav ms-auto">
                    <li class="nav-item">
                        <a class="nav-link btn btn-danger text-white" href="{% url 'core:logout' %}">
                            Logout
                        </a>
                    </li>
                </ul>

            </div>
        </div>
    </nav>

    <!-- CONTENT BLOCK -->
    <div class="container my-4">
        {% block content %}{% endblock %}
    </div>

    <!-- Bootstrap JS -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>

    <!-- Custom JS -->
    <script src="{% static 'reports/js/scripts.js' %}"></script>

    {% block extra_js %}{% endblock %}
</body>

</html>