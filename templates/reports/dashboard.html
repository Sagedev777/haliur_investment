{% extends 'reports/base.html' %}
{% block title %}Reports Dashboard{% endblock %}

{% block page_title %}System Reports{% endblock %}
{% block page_subtitle %}Overview of generated reports{% endblock %}

{% block content %}
<style>
    /* Mobile-specific styles */
    @media (max-width: 768px) {
        .table td, .table th {
            padding: 0.5rem;
            font-size: 0.85rem;
        }
        .btn {
            padding: 0.25rem 0.5rem;
            font-size: 0.8rem;
        }
        .badge {
            font-size: 0.7rem;
        }
    }
    
    @media (max-width: 576px) {
        .card-body {
            padding: 0 !important;
        }
        .text-end {
            text-align: left !important;
        }
        .table-responsive {
            border: 0;
        }
    }
</style>

<div class="card shadow-sm border-0">
    <div class="card-body p-0">
        <div class="table-responsive">
            <table class="table table-hover mb-0">
                <thead class="table-light">
                    <tr>
                        <th class="ps-3 ps-md-4 d-none d-sm-table-cell">ID</th>
                        <th class="ps-3 ps-md-4">Title</th>
                        <th class="d-none d-md-table-cell">Generated By</th>
                        <th class="d-none d-sm-table-cell">Date</th>
                        <th class="pe-3 pe-md-4 text-end">Action</th>
                    </tr>
                </thead>
                <tbody>
                    {% for report in reports %}
                    <tr>
                        <td class="ps-3 ps-md-4 fw-semibold d-none d-sm-table-cell">{{ report.id }}</td>
                        <td class="ps-3 ps-md-4">
                            <div class="d-flex flex-column">
                                <span class="fw-semibold">{{ report.title|truncatechars:30 }}</span>
                                <small class="text-muted d-sm-none mt-1">
                                    <i class="fas fa-user me-1"></i> {{ report.user.username }}
                                    <span class="ms-2">
                                        <i class="fas fa-calendar me-1"></i> {{ report.created_at|date:"m/d" }}
                                    </span>
                                </small>
                            </div>
                        </td>
                        <td class="d-none d-md-table-cell">
                            <span class="badge bg-secondary bg-opacity-10 text-secondary border border-secondary border-opacity-25">
                                <i class="fas fa-user me-1"></i> {{ report.user.username }}
                            </span>
                        </td>
                        <td class="d-none d-sm-table-cell text-muted">
                            <span class="d-none d-lg-inline">{{ report.created_at|date:"Y-m-d H:i" }}</span>
                            <span class="d-lg-none">{{ report.created_at|date:"m/d H:i" }}</span>
                        </td>
                        <td class="pe-3 pe-md-4 text-end">
                            <div class="d-flex justify-content-end gap-2">
                                <a href="{{ report.get_absolute_url }}" class="btn btn-sm btn-outline-primary">
                                    <i class="fas fa-eye me-1 d-none d-sm-inline"></i>
                                    <span class="d-none d-sm-inline">View</span>
                                    <span class="d-sm-none">View</span>
                                </a>
                                <button type="button" class="btn btn-sm btn-outline-secondary dropdown-toggle dropdown-toggle-split d-sm-none" data-bs-toggle="dropdown">
                                    <span class="visually-hidden">More options</span>
                                </button>
                                <ul class="dropdown-menu dropdown-menu-end">
                                    <li><a class="dropdown-item" href="#"><i class="fas fa-download me-2"></i>Download</a></li>
                                    <li><a class="dropdown-item" href="#"><i class="fas fa-print me-2"></i>Print</a></li>
                                    <li><hr class="dropdown-divider"></li>
                                    <li><a class="dropdown-item text-danger" href="#"><i class="fas fa-trash me-2"></i>Delete</a></li>
                                </ul>
                            </div>
                        </td>
                    </tr>
                    {% empty %}
                    <tr>
                        <td colspan="5" class="text-center py-5 text-muted">
                            <i class="fas fa-file-alt fa-2x mb-3 d-block opacity-50"></i>
                            <span class="d-none d-sm-inline">No reports available</span>
                            <span class="d-sm-none">No reports</span>
                        </td>
                    </tr>
                    {% endfor %}
                </tbody>
            </table>
        </div>
    </div>
    {% if reports %}
    <div class="card-footer bg-white border-0 py-3 d-sm-none">
        <div class="row align-items-center">
            <div class="col">
                <small class="text-muted">
                    Showing {{ reports|length }} report{{ reports|pluralize }}
                </small>
            </div>
            <div class="col-auto">
                <div class="dropdown">
                    <button class="btn btn-sm btn-outline-secondary dropdown-toggle" type="button" data-bs-toggle="dropdown">
                        <i class="fas fa-cog"></i>
                    </button>
                    <ul class="dropdown-menu dropdown-menu-end">
                        <li><a class="dropdown-item" href="#"><i class="fas fa-sync-alt me-2"></i>Refresh</a></li>
                        <li><a class="dropdown-item" href="#"><i class="fas fa-filter me-2"></i>Filter</a></li>
                        <li><hr class="dropdown-divider"></li>
                        <li><a class="dropdown-item" href="#"><i class="fas fa-plus me-2"></i>New Report</a></li>
                    </ul>
                </div>
            </div>
        </div>
    </div>
    {% endif %}
</div>

<!-- Mobile-friendly buttons for quick actions -->
<div class="d-sm-none fixed-bottom bg-white border-top p-3 shadow-lg">
    <div class="row g-2">
        <div class="col">
            <a href="#" class="btn btn-primary w-100">
                <i class="fas fa-plus me-2"></i>New Report
            </a>
        </div>
        <div class="col">
            <a href="#" class="btn btn-outline-primary w-100">
                <i class="fas fa-filter me-2"></i>Filter
            </a>
        </div>
    </div>
</div>

{% endblock %}