from decimal import Decimal
from django.conf import settings
from django.db import migrations, models
import django.db.models.deletion
import django.utils.timezone

class Migration(migrations.Migration):
    dependencies = [migrations.swappable_dependency(settings.AUTH_USER_MODEL), ('client_accounts', '0005_clientauditlog_clienteditrequest_userprofile_and_more')]
    operations = [migrations.AlterModelOptions(name='clientaccount', options={'ordering': ['-registration_date'], 'verbose_name': 'Client Account', 'verbose_name_plural': 'Client Accounts'}), migrations.AlterModelOptions(name='clientauditlog', options={'ordering': ['-timestamp'], 'verbose_name': 'Client Audit Log', 'verbose_name_plural': 'Client Audit Logs'}), migrations.AlterModelOptions(name='clienteditrequest', options={'ordering': ['-created_at'], 'verbose_name': 'Client Edit Request', 'verbose_name_plural': 'Client Edit Requests'}), migrations.AlterModelOptions(name='savingstransaction', options={'ordering': ['-transaction_date'], 'verbose_name': 'Savings Transaction', 'verbose_name_plural': 'Savings Transactions'}), migrations.AlterModelOptions(name='userprofile', options={'ordering': ['user__username']}), migrations.RemoveField(model_name='clientaccount', name='is_active'), migrations.RemoveField(model_name='clientaccount', name='is_approved'), migrations.AddField(model_name='clientaccount', name='account_status', field=models.CharField(choices=[('PENDING', 'Pending Approval'), ('ACTIVE', 'Active'), ('INACTIVE', 'Inactive'), ('SUSPENDED', 'Suspended'), ('CLOSED', 'Closed')], default='PENDING', max_length=20)), migrations.AddField(model_name='clientaccount', name='approval_date', field=models.DateTimeField(blank=True, null=True)), migrations.AddField(model_name='clientaccount', name='approved_by', field=models.ForeignKey(blank=True, help_text='User who approved this account', null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='approved_accounts', to=settings.AUTH_USER_MODEL)), migrations.AddField(model_name='clientaccount', name='created_by', field=models.ForeignKey(help_text='User who created this account', null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='created_accounts', to=settings.AUTH_USER_MODEL)), migrations.AddField(model_name='clientaccount', name='last_edited_by', field=models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='edited_accounts', to=settings.AUTH_USER_MODEL)), migrations.AddField(model_name='clientaccount', name='last_edited_date', field=models.DateTimeField(blank=True, null=True)), migrations.AddField(model_name='clientaccount', name='person2_client', field=models.ForeignKey(blank=True, help_text='Link to existing client (if available)', null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='joint_accounts_as_person2', to='client_accounts.clientaccount')), migrations.AddField(model_name='clientaccount', name='total_savings_deposited', field=models.DecimalField(decimal_places=2, default=Decimal('0.00'), max_digits=14)), migrations.AddField(model_name='savingstransaction', name='is_reversed', field=models.BooleanField(default=False)), migrations.AddField(model_name='savingstransaction', name='reference_number', field=models.CharField(blank=True, max_length=50, unique=True)), migrations.AddField(model_name='savingstransaction', name='reversal_date', field=models.DateTimeField(blank=True, null=True)), migrations.AddField(model_name='savingstransaction', name='reversal_reason', field=models.TextField(blank=True)), migrations.AddField(model_name='savingstransaction', name='reversed_by', field=models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='reversed_transactions', to=settings.AUTH_USER_MODEL)), migrations.AddField(model_name='userprofile', name='created_at', field=models.DateTimeField(auto_now_add=True, default=django.utils.timezone.now), preserve_default=False), migrations.AddField(model_name='userprofile', name='department', field=models.CharField(blank=True, max_length=100)), migrations.AddField(model_name='userprofile', name='phone', field=models.CharField(blank=True, max_length=20, null=True)), migrations.AddField(model_name='userprofile', name='updated_at', field=models.DateTimeField(auto_now=True)), migrations.AlterField(model_name='clientaccount', name='account_number', field=models.CharField(blank=True, editable=False, max_length=30, unique=True)), migrations.AlterField(model_name='clientaccount', name='loan_officer', field=models.ForeignKey(help_text='Loan officer responsible for this client', on_delete=django.db.models.deletion.CASCADE, related_name='client_accounts', to=settings.AUTH_USER_MODEL)), migrations.AlterField(model_name='clientaccount', name='person1_photo', field=models.ImageField(blank=True, null=True, upload_to='client_photos/')), migrations.AlterField(model_name='clientaccount', name='person1_signature', field=models.ImageField(blank=True, null=True, upload_to='client_signatures/')), migrations.AlterField(model_name='clientaccount', name='person2_nin', field=models.CharField(blank=True, max_length=20, null=True)), migrations.AlterField(model_name='clientaccount', name='person2_photo', field=models.ImageField(blank=True, null=True, upload_to='client_photos/')), migrations.AlterField(model_name='clientaccount', name='person2_signature', field=models.ImageField(blank=True, null=True, upload_to='client_signatures/')), migrations.AlterField(model_name='clientauditlog', name='action', field=models.CharField(choices=[('CREATE', 'Create Account'), ('UPDATE', 'Update Account'), ('EDIT_REQUEST', 'Edit Request Submitted'), ('APPROVE_EDIT', 'Edit Request Approved'), ('REJECT_EDIT', 'Edit Request Rejected'), ('SAVINGS_TX', 'Savings Transaction'), ('ACCOUNT_APPROVE', 'Account Approved'), ('ACCOUNT_REJECT', 'Account Rejected'), ('STATUS_CHANGE', 'Account Status Changed')], max_length=30)), migrations.AddIndex(model_name='clientaccount', index=models.Index(fields=['account_status'], name='client_acco_account_d6bef8_idx')), migrations.AddIndex(model_name='clientaccount', index=models.Index(fields=['registration_date'], name='client_acco_registr_f3308e_idx'))]